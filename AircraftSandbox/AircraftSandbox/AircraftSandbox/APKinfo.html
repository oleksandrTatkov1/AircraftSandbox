<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../AircraftSandbox/css/style.css">
    <link rel="stylesheet" href="../AircraftSandbox/css/APKinfoStyle.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Londrina+Shadow&family=Londrina+Solid:wght@100;300;400;900&family=M+PLUS+Rounded+1c&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
</head>
<body>
    <div class="page-wrapper">
        <header class="header">
            <div class="container header__container">
                <div class="header__logo">
                    <img src="../AircraftSandbox/img/index/header/logo_black.png" alt="logo" class="header__imgL">
                </div>
                <div class="header__menu">
                    <nav class="header__nav nav">
                      <ul class="nav__list">
                        <li class="nav__item"><a href="index.html" class="nav__link">–ì–æ–ª–æ–≤–Ω–∞</a></li>
                        <li class="nav__item"><a href="forum.html" class="nav__link">–§–æ—Ä—É–º</a></li>
                        <li class="nav__item"><a href="routes.html" class="nav__link">–ú–∞—Ä—à—Ä—É—Ç–∏ –ø–æ–ª—å–æ—Ç—ñ–≤</a></li>
                        <li class="nav__item"><a href="apk.html" class="nav__link">–î–æ–¥–∞—Ç–∫–æ–≤—ñ APK</a></li>
                        <li class="nav__item">
                          <input type="checkbox" id="dropItem" class="dropdown-toggle">
                          <label for="dropItem" class="dropdown-label">–î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏ <span class="arrow">‚ñº</span></label>
                          <ul class="dropdown-menu">
                            <li class="dropdown-item"><a href="https://t.me/SkyTechDev_bot">–ü—ñ–¥—Ç—Ä–∏–º–∫–∞</a></li>
                            <li class="dropdown-item"><a href="guides.html">–¢—É—Ç–æ—Ä—ñ–∞–ª–∏</a></li>
                          </ul>
                        </li>
                      </ul>
                    </nav>
                    <div class="header__registration">
                      <button class="header__buttonForReg" id="auth-button">
                        –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è 
                      </button>
                      <div class="header__profile" id="user-profile" style="display: none;">
                        <img src="/AircraftSandbox/img/index/header/free-icon-user-483361.png" alt="–ü—Ä–æ—Ñ—ñ–ª—å" class="profile-icon">
                      </div>
                    </div>                    
                </div>
                <div class="menu-btn">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </header>
        <main class="main">
            <div class="container container_flex">
               <div class="goldInfoAPK goldInfoAPK_grid">
                    <div class="goldInfoAPK__img">
                        <img src="" alt="">
                    </div>
                    <div class="goldInfoAPK__info info">
                        <ul class="info__list">
                            <li class="info__item">–ê–≤—Ç–æ—Ä:</li>
                            <li class="info__item">–†–æ–∑–º—ñ—Ä:</li>
                            <li class="info__item">–î–æ–¥–∞–≤:</li>
                            <li class="info__item">–î–∞—Ç–∞:</li>
                            <li class="info__item">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å:</li>
                        </ul>
                        <button class="goldInfoAPK__buttonD">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏</button>
                    </div>
               </div>
               <div class="additionalInfoAPK">
                <h6 class="additionalInfoAPK__title">–ü—Ä–æ APK:</h6>
                <p class="additionalInfoAPK__discription"></p>
               </div>
            </div >   
        </main>
        <footer class="footer">
            <div class="footer__container">
                <div class="links">
                    <a href="https://www.instagram.com/skytechdev/?igsh=MXRyZnI2eW9reWp0dg%3D%3D#" class="links_Instagram">Instagram</a>
                    <a href="https://t.me/skytechdev" class="links_Telegram">Telegram</a>
                    <a href="https://www.youtube.com/@skytechdev" class="links_YouTube">YouTube</a>
                </div>
            </div>
        </footer>
    </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const urlParams = new URLSearchParams(window.location.search);
  const id = urlParams.get('Id') || urlParams.get('id');
  if (!id) return;

  fetch(`PHP/scripts/loadApkById.php?Id=${id}`)
    .then(res => res.json())
    .then(data => {
      if (data.error) {
        console.error('‚ùå', data.error);
        return;
      }

      document.querySelector('.goldInfoAPK__img img').src = data.imagePath;
      const infoItems = document.querySelectorAll('.info__item');
      infoItems[0].innerText = `–ê–≤—Ç–æ—Ä: ${data.author}`;
      infoItems[1].innerText = `–†–æ–∑–º—ñ—Ä: ${data.size}`;
      infoItems[2].innerText = `–î–æ–¥–∞–≤: ${data.addedBy}`;
      infoItems[3].innerText = `–î–∞—Ç–∞: ${data.date}`;
      infoItems[4].innerText = `–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å: ${data.downloads}`;
      document.querySelector('.additionalInfoAPK__discription').innerText = data.description;

      // üëâ –î–æ–¥–∞—î–º–æ –ø–æ–¥—ñ—é –¥–ª—è –∫–Ω–æ–ø–∫–∏ –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏
      const downloadBtn = document.querySelector('.goldInfoAPK__buttonD');
      downloadBtn.addEventListener('click', () => {
        if (data.apkLink) {
          window.open(data.apkLink, '_blank');
        } else {
          alert('–ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ APK –≤—ñ–¥—Å—É—Ç–Ω—î.');
        }
      });
    })
    .catch(err => console.error('‚ùå Fetch error:', err));
});
</script>
<script src="../AircraftSandbox/js/script.js"></script>
</html>