<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ü—Ä–æ—Ñ—ñ–ª—å</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Londrina+Shadow&family=Londrina+Solid:wght@100;300;400;900&family=M+PLUS+Rounded+1c&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
  <link rel="stylesheet" href="../AircraftSandbox/css/style.css">
  <link rel="stylesheet" href="../AircraftSandbox/css/profile.css"/>


</head>
<body>
  <div class="page-wrapper">
    <header class="header">
        <div class="container header__container">
            <div class="header__logo">
                <img src="../AircraftSandbox/img/index/header/logo_black.png" alt="logo" class="header__imgL">
            </div>
            <div class="header__menu">
                <nav class="header__nav nav">
                  <ul class="nav__list">
                    <li class="nav__item"><a href="index.html" class="nav__link">–ì–æ–ª–æ–≤–Ω–∞</a></li>
                    <li class="nav__item"><a href="forum.html" class="nav__link">–§–æ—Ä—É–º</a></li>
           
                    <li class="nav__item"><a href="apk.html" class="nav__link">–î–æ–¥–∞—Ç–∫–æ–≤—ñ APK</a></li>
                    <li class="nav__item">
                      <input type="checkbox" id="dropItem" class="dropdown-toggle">
                      <label for="dropItem" class="dropdown-label">–î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏ <span class="arrow">‚ñº</span></label>
                      <ul class="dropdown-menu">
                        <li class="dropdown-item"><a href="https://t.me/SkyTechDev_bot">–ü—ñ–¥—Ç—Ä–∏–º–∫–∞</a></li>
                        <li class="dropdown-item"><a href="guides.html">–¢—É—Ç–æ—Ä—ñ–∞–ª–∏</a></li>
                      </ul>
                    </li>
                  </ul>
                </nav>
                <div class="header__registration">
        
                </div>                    
            </div>
            <div class="menu-btn">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="container">
          <div class="profile-card">
            <div class="profile-card__header">
              <img src="../AircraftSandbox/img/APK/main/photo_2025-04-17_15-47-28.jpg" alt="Avatar" class="profile-card__avatar">
              <div class="profile-card__info">
                <h2 class="profile-card__username">@DefaultUsername</h2>
                <p class="profile-card__bio">–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –±—ñ–æ.</p>
              </div>
              <div class="profile-card__actions">
                <button class="profile-card__edit" id="admin-panel-btn" style="display: none;">
                  <a href="adminPanel.html">–ê–¥–º—ñ–Ω –ü–∞–Ω–µ–ª—å</a>
                </button>
                <button class="profile-card__edit">
                  <a href="profileRedact.html">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å</a>
                 
                </button>
                <button class="logout-button" id="logoutBtn">–í–∏–π—Ç–∏ –∑ –∞–∫–∫–∞—É–Ω—Ç—É</button>

              </div>
              
            </div>
            <button class="profile-card__edit" id="admin-panel-btn" style="display: none;">
              <a href="adminPanel.html">–ê–¥–º—ñ–Ω –ü–∞–Ω–µ–ª—å</a>
            </button>                       
            <div class="profile-card__tabs">
              <div class="profile-card__indicator" id="tab-indicator"></div>
              <button class="profile-card__tab active" data-tab="posts">–ü–æ—Å—Ç–∏</button>
              <button class="profile-card__tab" data-tab="replies">–í—ñ–¥–ø–æ–≤—ñ–¥—ñ</button>
            </div>
            
              
      
            <div class="profile-card__content" id="posts">
              <div class="profile-card__post">
                <div class="post__header">
                 
              <div class="profile-card__content hidden" id="replies">
                <div class="profile-card__answer">
                  <div class="answer__header">
                    
              </div>
              <div class="profile-card__post">
                <div class="post__header">
                  <img src="e737bbb3-f42c-48c5-a56f-d1beb509ac81.png" class="post__avatar" />
                  <span class="post__user">@GloryToWLW</span>
                </div>
                <h4 class="post__title">Best Beginner-Friendly Airliners?</h4>
                <p class="post__text">Hey everyone! üñê I‚Äôm new to flight sims and looking for a good airliner to start with...</p>
              </div>
      
              <!-- –ü–æ–≤—Ç–æ—Ä—ñ—Ç—å —ñ–Ω—à—ñ –ø–æ—Å—Ç–∏ –∑–∞ —Ü—ñ—î—é –∂ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é -->
            </div>
      
            <div class="profile-card__content hidden" id="replies">
             
        </div>
      </main>
      

    <footer class="footer">
        <div class="footer__container">
            <div class="links">
                <a href="https://www.instagram.com/skytechdev/?igsh=MXRyZnI2eW9reWp0dg%3D%3D#" class="links_Instagram">Instagram</a>
                <a href="https://t.me/skytechdev" class="links_Telegram">Telegram</a>
                <a href="https://www.youtube.com/@skytechdev" class="links_YouTube">YouTube</a>
            </div>
        </div>
    </footer>
  </div>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
  <script>
  document.addEventListener("DOMContentLoaded", function () {
  fetch("/AircraftSandbox/AircraftSandbox/AircraftSandbox/AircraftSandbox/PHP/scripts/login_Firebase.php")
  .then(response => response.json())
    .then(user => {
      if (!user || !user.Login) return;

      // –ê–≤–∞—Ç–∞—Ä
      const avatar = document.querySelector(".profile-card__avatar");
      if (avatar && user.ImagePath) {
        avatar.src = user.ImagePath;
      }

      // –Ü–º‚Äô—è
      const username = document.querySelector(".profile-card__username");
      if (username && user.Name) {
        username.textContent = "@" + user.Name;
      }

      // –ë—ñ–æ
      const bio = document.querySelector(".profile-card__bio");
      if (bio && user.Bio) {
        bio.textContent = user.Bio;
      }

      // –•–µ–¥–µ—Ä: –ø–æ–∫–∞–∑–∞—Ç–∏ –∞–≤–∞—Ç–∞—Ä –∑–∞–º—ñ—Å—Ç—å –∫–Ω–æ–ø–∫–∏
      const authButton = document.getElementById("auth-button");
      const userProfile = document.getElementById("user-profile");
      if (authButton) authButton.style.display = "none";
      if (userProfile) userProfile.style.display = "block";

      // –û–Ω–æ–≤–∏—Ç–∏ –∞–≤–∞—Ç–∞—Ä —Ç–∞ —ñ–º‚Äô—è —É –ø–æ—Å—Ç–∞—Ö
      document.querySelectorAll(".post__user").forEach(el => {
        el.textContent = "@" + user.Name;
      });

      //–ê–¥–º—ñ–Ω —á–∏ –Ω—î
      if (user.IsSuperUser == 1) {
    const adminBtn = document.getElementById("admin-panel-btn");
    if (adminBtn) adminBtn.style.display = "inline-block";
  }
      document.querySelectorAll(".post__avatar").forEach(el => {
        el.src = user.ImagePath;
      });
    })
});

    </script>
</body>
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script src="../AircraftSandbox/js/script.js"></script>

<script src="../AircraftSandbox/js/profile.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
    fetch('/AircraftSandbox/AircraftSandbox/AircraftSandbox/AircraftSandbox/PHP/scripts/authCheck.php')
        .then(response => response.json())
        .then(data => {
            if (!data.authorized) {
                window.location.href = '/AircraftSandbox/AircraftSandbox/AircraftSandbox/AircraftSandbox/registerAlpha/register.html';
            }
        })
        .catch(error => {
            console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó:', error);
            // –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–µ—Ä–≤–µ—Ä–∞
            window.location.href = '/AircraftSandbox/AircraftSandbox/AircraftSandbox/AircraftSandbox/registerAlpha/register.html';
        });
});
</script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const logoutBtn = document.getElementById('logoutBtn');
    if (logoutBtn) {
      logoutBtn.addEventListener('click', function () {
        fetch('/AircraftSandbox/AircraftSandbox/AircraftSandbox/AircraftSandbox/PHP/scripts/sessionLogout.php', {
          method: 'POST'
        })
        .then(res => res.json())
        .then(data => {
          if (data.success) {
            window.location.href = '/AircraftSandbox/AircraftSandbox/AircraftSandbox/AircraftSandbox/registerAlpha/register.html';
          } else {
            console.error('‚ö†Ô∏è Logout failed:', data);
          }
        })
        .catch(err => {
          console.error('‚ùå Logout error:', err);
        });
      });
    }
  });
  </script>
  
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      fetch("/AircraftSandbox/AircraftSandbox/AircraftSandbox/AircraftSandbox/PHP/scripts/loadUserPost.php")
        .then(response => response.text())
        .then(postsHtml => {
          const postsContainer = document.getElementById("posts");
          if (postsContainer) {
            postsContainer.innerHTML = postsHtml;
          }
        })
        .catch(err => console.error("–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –ø–æ—Å—Ç—ñ–≤:", err));
    });
    </script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const repliesTab = document.querySelector('[data-tab="replies"]');
        const postsTab = document.querySelector('[data-tab="posts"]');
        const repliesContainer = document.getElementById('replies');
        const postsContainer = document.getElementById('posts');
      
        if (repliesTab) {
          repliesTab.addEventListener('click', function () {
            // –ü–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è –∞–∫—Ç–∏–≤–Ω–æ—ó –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.profile-card__tab').forEach(tab => tab.classList.remove('active'));
            repliesTab.classList.add('active');
      
            // –°—Ö–æ–≤–∞—Ç–∏ —ñ–Ω—à—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ —ñ –ø–æ–∫–∞–∑–∞—Ç–∏ replies
            document.querySelectorAll('.profile-card__content').forEach(content => content.classList.add('hidden'));
            if (repliesContainer) repliesContainer.classList.remove('hidden');
      
            // –û—á–∏—Å—Ç–∏—Ç–∏ repliesContainer (–ø–æ–∫–∞–∑–∞—Ç–∏ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä)
            if (repliesContainer) {
              repliesContainer.innerHTML = '<p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π...</p>';
            }
      
            // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
            fetch('/AircraftSandbox/AircraftSandbox/AircraftSandbox/AircraftSandbox/PHP/scripts/loadUserComments.php', {
              credentials: 'same-origin'
            })
            .then(response => {
              if (!response.ok) {
                throw new Error('–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ');
              }
              return response.text();
            })
            .then(html => {
              if (repliesContainer) {
                repliesContainer.innerHTML = html;
              }
            })
            .catch(error => {
              console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π:', error);
              if (repliesContainer) {
                repliesContainer.innerHTML = '<p>–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ.</p>';
              }
            });
          });
        }
      
        if (postsTab) {
          postsTab.addEventListener('click', function () {
            // –ü–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è –∞–∫—Ç–∏–≤–Ω–æ—ó –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.profile-card__tab').forEach(tab => tab.classList.remove('active'));
            postsTab.classList.add('active');
      
            // –°—Ö–æ–≤–∞—Ç–∏ replies —ñ –ø–æ–∫–∞–∑–∞—Ç–∏ posts
            document.querySelectorAll('.profile-card__content').forEach(content => content.classList.add('hidden'));
            if (postsContainer) postsContainer.classList.remove('hidden');
          });
        }
      });
      </script>
      
  
</html>

